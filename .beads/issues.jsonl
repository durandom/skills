{"id":"durandom-ehr","title":"Extensible context: plugin architecture for layton context","description":"## Problem\n\nThe current `layton context` command returns only temporal data (time_of_day, work_hours, etc.). However, SKILL.md workflows often need richer situational awareness:\n\n- **Task pressure**: How many items are waiting? Is the inbox overflowing?\n- **Interrupt state**: Is there an active interrupt that should take priority?\n- **Energy/focus hints**: User-defined signals about current state\n- **Custom signals**: End-user extensible context providers\n\n## Proposed Solution\n\nMake context extensible via a plugin/provider architecture:\n\n```json\n{\n  \"temporal\": { ... },           // Built-in (current behavior)\n  \"tasks\": {                     // Provider: beads\n    \"waiting\": 12,\n    \"blocked\": 3,\n    \"inbox_count\": 5\n  },\n  \"interrupt\": {                 // Provider: user-defined\n    \"active\": true,\n    \"reason\": \"urgent-call\"\n  }\n}\n```\n\n## Design Considerations\n\n1. **Provider discovery**: How does Layton find context providers?\n2. **Schema flexibility**: Providers define their own output shape\n3. **Performance**: Context should remain fast (parallel provider calls?)\n4. **Graceful degradation**: Missing providers â†’ omit section, don't fail\n\n## Tasks\n\n- [ ] Design provider interface (how providers register, what they return)\n- [ ] Implement provider discovery mechanism\n- [ ] Add built-in beads provider (task counts from `bd stats --json`)\n- [ ] Document how users can add custom providers\n\n## Blocked By\n\nThis is a **future improvement** (P4 backlog). Current Stage 0 scope is temporal-only context.","status":"open","priority":4,"issue_type":"feature","owner":"hild@b4mad.net","created_at":"2026-01-15T16:49:05.832859+01:00","created_by":"Marcel Hild","updated_at":"2026-01-15T16:49:20.205093+01:00"}
